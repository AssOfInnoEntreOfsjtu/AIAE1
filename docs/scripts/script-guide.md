# 常用脚本说明

## 1. 开发脚本

### 1.1 启动开发服务器
```bash
npm run dev
```
**描述**: 启动开发服务器，支持热重载
**参数**: 无
**环境**: 开发环境
**输出**: 本地开发服务器地址（默认 http://localhost:3000）

### 1.2 构建项目
```bash
npm run build
```
**描述**: 构建生产环境代码
**参数**: 无
**环境**: 生产环境
**输出**: 构建后的文件在 `.next` 目录

### 1.3 启动生产服务器
```bash
npm run start
```
**描述**: 启动生产环境服务器
**参数**: 无
**环境**: 生产环境
**输出**: 生产服务器地址

### 1.4 代码检查
```bash
npm run lint
```
**描述**: 运行 ESLint 检查代码
**参数**: 无
**环境**: 所有环境
**输出**: 代码检查报告

## 2. 数据库脚本

### 2.1 数据库迁移
```bash
npm run db:migrate
```
**描述**: 执行数据库迁移
**参数**: 
- `--up`: 向上迁移
- `--down`: 向下迁移
**环境**: 开发/生产环境
**输出**: 迁移执行结果

### 2.2 数据库种子
```bash
npm run db:seed
```
**描述**: 填充测试数据
**参数**: 无
**环境**: 开发环境
**输出**: 数据填充结果

## 3. 测试脚本

### 3.1 运行测试
```bash
npm run test
```
**描述**: 运行所有测试
**参数**: 
- `--watch`: 监视模式
- `--coverage`: 生成覆盖率报告
**环境**: 开发环境
**输出**: 测试结果报告

### 3.2 运行特定测试
```bash
npm run test:unit
npm run test:integration
npm run test:e2e
```
**描述**: 运行特定类型的测试
**参数**: 同 `npm run test`
**环境**: 开发环境
**输出**: 测试结果报告

## 4. 部署脚本

### 4.1 部署到开发环境
```bash
npm run deploy:dev
```
**描述**: 部署到开发环境
**参数**: 无
**环境**: 开发环境
**输出**: 部署结果

### 4.2 部署到生产环境
```bash
npm run deploy:prod
```
**描述**: 部署到生产环境
**参数**: 无
**环境**: 生产环境
**输出**: 部署结果

## 5. 工具脚本

### 5.1 清理构建文件
```bash
npm run clean
```
**描述**: 清理构建文件和缓存
**参数**: 无
**环境**: 所有环境
**输出**: 清理结果

### 5.2 更新依赖
```bash
npm run update-deps
```
**描述**: 更新项目依赖
**参数**: 无
**环境**: 所有环境
**输出**: 更新结果

## 6. 文档脚本

### 6.1 生成 API 文档
```bash
npm run docs:api
```
**描述**: 生成 API 文档
**参数**: 无
**环境**: 所有环境
**输出**: API 文档文件

### 6.2 生成组件文档
```bash
npm run docs:components
```
**描述**: 生成组件文档
**参数**: 无
**环境**: 所有环境
**输出**: 组件文档文件

## 7. 性能分析脚本

### 7.1 性能分析
```bash
npm run analyze
```
**描述**: 分析项目性能
**参数**: 无
**环境**: 开发环境
**输出**: 性能分析报告

### 7.2 包大小分析
```bash
npm run analyze:bundles
```
**描述**: 分析包大小
**参数**: 无
**环境**: 开发环境
**输出**: 包大小分析报告

## 8. 安全脚本

### 8.1 安全扫描
```bash
npm run security:scan
```
**描述**: 运行安全扫描
**参数**: 无
**环境**: 所有环境
**输出**: 安全扫描报告

### 8.2 依赖审计
```bash
npm run security:audit
```
**描述**: 审计项目依赖
**参数**: 无
**环境**: 所有环境
**输出**: 依赖审计报告

## 9. 自定义脚本示例

### 9.1 备份数据库
```bash
#!/bin/bash
# backup-db.sh
DATE=$(date +%Y%m%d)
pg_dump -U $DB_USER -d $DB_NAME > backup_$DATE.sql
```
**描述**: 备份数据库
**参数**: 无
**环境**: 生产环境
**输出**: 数据库备份文件

### 9.2 部署回滚
```bash
#!/bin/bash
# rollback.sh
git reset --hard HEAD^
npm install
npm run build
pm2 restart aiae
```
**描述**: 回滚到上一个版本
**参数**: 无
**环境**: 生产环境
**输出**: 回滚结果 